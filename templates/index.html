{% extends "base.html" %}
{% block title %}Home Page{% endblock %}
{% block content %}
<div class="row">
    <div class="col align-self-start">
    <a href={{url_for('login')}} class="btn btn-primary">Log in</a>
    <a href={{url_for('register')}} class="btn btn-primary">Register</a>
        Welcome to my TMDb REST API!
        <form action="#" method="post">
            <div class="flex-fill">
                <input type="text" placeholder="Enter a movie title" name="search_title" class="form-control justify-center">
            </div>
            <select class="form-select-sm" aria-label="Small select example" name="lang">
                <option selected>en-US</option>
                {% for lang in languages %}
                    <option value={{lang}}>{{lang}}</option>
                {% endfor %}
            </select>
        </form>
    </div>

    <div id="carouselExample" class="carousel slide">
    <div class="carousel-inner">
        {% for slide in trending|batch(5, None) %}
        <div class="carousel-item {% if loop.first %}active{% endif %}">
            <div class="row">
                {% for item in slide %}
                {% if item %}
                <div class="col">
                    <div class="bg-secondary rounded-3 p-3 h-100 d-flex flex-column">
                        {% if item.poster_path %}
                            <div class="mb-3" style="aspect-ratio: 2/3; width: 100%; overflow: hidden;">
                                <img 
                                src="https://image.tmdb.org/t/p/w500/{{item.poster_path}}" 
                                alt="{{item.title}}"
                                class="w-100 h-100"
                                style="object-fit: cover;">
                            </div>
                        {% else %}
                            <div class="w-100 h-100 d-flex align-items-center justify-content-center bg-secondary">No image</div>
                        {% endif %}
                    
              <div class="fw-semibold">{{ item.title }}</div>
              <div class="text-muted small">
                {{ item.release_date }} â€¢ {{ (item.vote_average * 10)|round(0) }}%
              </div>
            </div>
        </div>
          {% endif %}
          {% endfor %}

        </div>
      </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
    </div>
{% endblock %}